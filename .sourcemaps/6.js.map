{"version":3,"sources":["../../src/pages/order-confirmation/order-confirmation.module.ts","../../src/pages/order-confirmation/order-confirmation.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { OrderConfirmationPage } from './order-confirmation';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    OrderConfirmationPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(OrderConfirmationPage),\r\n  ],\r\n})\r\nexport class OrderConfirmationPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirmation/order-confirmation.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { PedidoDTO } from '../../models/pedido.dto';\r\nimport { CartItem } from '../../models/cart-item';\r\nimport { CartService } from '../../app/services/cart.service';\r\nimport { ClienteDTO } from '../../models/cliente.dto';\r\nimport { EnderecoDTO } from '../../models/endereco.dto';\r\nimport { ClienteService } from '../../app/services/cliente.service';\r\nimport { PedidoService } from '../../app/services/pedido.service';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-order-confirmation',\r\n  templateUrl: 'order-confirmation.html',\r\n})\r\nexport class OrderConfirmationPage {\r\n\r\n  pedido: PedidoDTO;\r\n  cartItems: CartItem[];\r\n  cliente: ClienteDTO;\r\n  endereco: EnderecoDTO;\r\n  codpedido: string;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    public clienteService: ClienteService,\r\n    public cartService: CartService,\r\n    public pedidoService: PedidoService) {\r\n\r\n    this.pedido = this.navParams.get('pedido');\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.cartItems = this.cartService.getCart().items;\r\n\r\n    this.clienteService.findById(this.pedido.cliente.id)\r\n      .subscribe(response => {\r\n        this.cliente = response as ClienteDTO;\r\n        this.endereco = this.findEndereco(this.pedido.enderecoDeEntrega.id, response['enderecos']);\r\n      },\r\n      error => {\r\n        this.navCtrl.setRoot('HomePage');\r\n      });\r\n  }\r\n\r\n  private findEndereco(id: string, list: EnderecoDTO[]) : EnderecoDTO {\r\n    let position = list.findIndex(x => x.id == id);\r\n    return list[position];\r\n  }\r\n\r\n  total() : number {\r\n    return this.cartService.total();\r\n  } \r\n\r\n  back() {\r\n    this.navCtrl.setRoot('CartPage');\r\n  }\r\n\r\n  home() {\r\n    this.navCtrl.setRoot('CategoriasPage');\r\n  }\r\n\r\n  checkout() {\r\n    this.pedidoService.insert(this.pedido)\r\n      .subscribe(response => {\r\n        this.cartService.createOrClearCart();\r\n        this.codpedido = this.extractId(response.headers.get('location'));\r\n      },\r\n      error => {\r\n        if (error.status == 403) {\r\n          this.navCtrl.setRoot('HomePage');\r\n        }\r\n      });\r\n  }\r\n\r\n  private extractId(location : string) : string {\r\n    let position = location.lastIndexOf('/');\r\n    return location.substring(position + 1, location.length);\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirmation/order-confirmation.ts"],"sourceRoot":""}